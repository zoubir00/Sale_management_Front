
<!-- OPEN MODAL button -->
<div class="justify-content-end mb-3"><button class="btn btn-outline-success" (click)="OpenModal();">
  <span>{{'::NewVente' | abpLocalization}}</span>
</button></div>
<div class="row">
  <h2 class="text-center bg-warning">List Of all sales passed</h2>
</div>
<table class="table table-warning">
    <thead>
      <tr>
        <th scope="col"></th>
        <th scope="col">Date Vente</th>
        <th scope="col">Client first name</th>
        <th scope="col">Client last name</th>
        <th scope="col">Articles</th>
        <!-- <th scope="col">Quantity</th> -->
        <th scope="col">Total Amount</th>
        
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let vente of ventes; let i=index">
        <td>{{i+1}}</td>
        <td>{{vente.dateVente | date: 'dd/MM/yyyy'}}</td>
        <td>{{vente.clientFName}}</td>
        <td>{{vente.clientLName}}</td>
        <td>{{vente.articleVendue}}</td>
        <!-- <td>{{vente.quantityVendue}}</td> -->
        <td>{{vente.prixTotal}} DH</td>
       
        
      </tr>

    </tbody>
  </table>
  
  <!-- Create vente modal -->
  <abp-modal [(visible)]="isModalOpen">
    <ng-template #abpHeader>
      <h3>{{ '::NewVente'  | abpLocalization }}</h3>
    </ng-template>
   
  
    <ng-template #abpBody>
      <form [formGroup]="saleForm" (ngSubmit)="CreateVente()">
        <div class="form-group">
          <label for="clientId">Client ID:</label>
          <select id="clientId" class="form-control" formControlName="clientId" (change)="selectClient($event.target.value)">
            <option value="0" selected>Select a Client</option>
            <option *ngFor="let client of clients" [value]="client.id">{{ client.lName }}</option>
          </select>
        </div>
      
        <div *ngIf="selectedClientId !== null">
          Selected Client ID: {{ selectedClientId }}
        </div>
      
        <!-- Use formGroup for article inputs -->
        <div [formGroup]="articleForm">
          <div class="form-group">
            <label for="articleId">Article ID:</label>
            <select id="articleId" class="form-control" formControlName="articleId">
              <option value="0" selected>Select an article</option>
              <option *ngFor="let article of articles" [value]="article.id">{{ article.libelle }}</option>
            </select>
            <!-- <input type="number" id="articleId" formControlName="articleId" /> -->
          </div>
      
          <div class="form-group">
            <label for="quantity">Quantity:</label>
            <input type="number" id="quantity" class="form-control" formControlName="quantity">

            <!-- <input type="number" id="quantity" formControlName="quantity" /> -->
          </div>
      
          <button class="btn btn-success" type="button" (click)="addArticle()">Add Article</button>
        </div>
      
        <div *ngFor="let article of selectedArticles; let i = index">
          Article {{ i + 1 }}: Id {{ article.id }}, Quantity {{ article.quantity }}
          <button class="btn btn-warning" type="button" (click)="removeArticle(i)">Remove</button>
        </div>
      
        <!-- <button type="submit" [disabled]="selectedClientId === null || selectedArticles.length === 0">Submit</button> -->
      </form>
      
      
    </ng-template>
  
    <ng-template #abpFooter>
      <button type="button" class="btn btn-secondary" abpClose>Close</button>
       <!--added save button-->
    <button class="btn btn-primary" (click)="CreateVente()" [disabled]="selectedClientId === null || selectedArticles.length === 0">
      <i class="fa fa-check mr-1"></i>
      Valid
  </button>
    </ng-template>
  </abp-modal>

<!-- <form [formGroup]="venteForm" (ngSubmit)="CreateVente();">
        <div class="form-group">
          <label for="clientId">Clients</label>
          <select id="clientId" class="form-control" formControlName="clientId">
            <option value="0" selected>Select a Client</option>
            <option *ngFor="let client of clients" [value]="client.id">{{ client.lName }}</option>
          </select>
        </div>
        <div class="form-group">
          <label for="articleId">Select an Article:</label>
          <select id="articleId" class="form-control" formControlName="articleId">
            <option value="0" selected>Select an article</option>
            <option *ngFor="let article of articles" [value]="article.id">{{ article.libelle }}</option>
          </select>
        </div>
        <div class="form-group">
          <label for="quantity">Quantity wanted</label>
          <input type="number" id="quantity" class="form-control" formControlName="quantity">
        </div>
       </form> -->