<div class="container">
    <h2 class="text-center text-warning">Add Sale</h2>
    
    <form [formGroup]="venteForm" (ngSubmit)="onSubmit()">
      <table class="table table-striped table-hover">
        <thead>
          <th>Sale Code</th>
          <th>Select Client</th>
          <th>Select Date </th>
        </thead>
        <tbody>
          <td>  
            <input type="text" id="venteCode" formControlName="venteCode" class="form-control" required />
         </td>
          <td>
            <select id="clientId" formControlName="clientId" class="form-control" required>
              <option *ngFor="let client of clients" [value]="client.id">{{ client.lName }}</option>
            </select>
          </td>
          <td>
            <input type="date" id="dateVente" formControlName="dateVente" class="form-control" required />
          </td>
        </tbody>
      </table>
      
      <button type="button" class="btn btn-primary me-3" (click)="addVenteLine()">Add Sale Line</button>

      <!-- Vente Lines Input Fields -->
      <table class="table table-striped table-hover">
        <thead>
          <th>Sale Code</th>
          <th>Select Client</th>
          <th>Select Date </th>
        </thead>
        <tbody formArrayName="venteLines">
          <tr *ngFor="let line of venteLinesControls; let i = index" class="vente-line">
              <td>  
            <select id="articleId"  [formControl]="venteLinesControls[i].get('articleId')"   class="form-control" required>
              <option value="0" selected>Select an article</option>
              <option *ngFor="let article of articles" [value]="article.id">{{ article.libelle }}</option>
            </select>         
          <td>
            <input type="number" id="qtySold" [formControl]="venteLinesControls[i].get('qtySold')" class="form-control" required />
          </td>
          <td>
            <button type="button" class="btn btn-danger" (click)="removeVenteLine(i)">Remove</button>
          </td>
          </tr>
        
        </tbody>
      </table>
      
      <div class="row mb-4 mt-4" >
        <div class="col-6">
          <button type="submit" class="btn btn-success mt-3 text-start">Valid</button>
        </div>
        <div class="col-6 text-end">
          <button type="button" class="btn btn-secondary mt-3 " routerLink="/ventes">Cancel</button>
        </div>
      </div>
    </form>
    
  </div>
  