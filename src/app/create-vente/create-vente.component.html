<div class="container" >
    <h2 class="text-center text-secondary mt-5 mb-4">Add Sale</h2>
    <div *ngIf="isLoading" class="flex flex-wrap align-items-center justify-content-center">
      <div class="fadein animation-duration-2000 animation-iteration-infinite flex align-items-center justify-content-center
          font-bold  border-round m-2 px-5 py-3">
          <span class="dot"></span>
          <span class="dot"></span>
          <span class="dot"></span>
          <span class="dot"></span>
      </div>
    </div> 
    <form [formGroup]="venteForm" (ngSubmit)="onSubmit()" *ngIf="!isLoading">
      <table class="table table-striped table-hover">
        <thead>
          <th>Sale Code</th>
          <th>Select Client</th>
          <th>Select Date </th>
        </thead>
        <tbody>
          <td>  
            <input type="text" id="venteCode" formControlName="venteCode" class="form-control" required />
         </td>
          <td>
            <select id="clientId" formControlName="clientId" class="form-control" required>
              <option *ngFor="let client of clients" [value]="client.id">{{ client.lName }}</option>
            </select>
          </td>
          <td>
            <input type="datetime-local" id="dateVente" formControlName="dateVente" class="form-control" required />
          </td>
        </tbody>
      </table>
      
      <button type="button" class="btn btn-success me-3" (click)="addVenteLine()">Add article</button>

      <!-- Vente Lines Input Fields -->
      <table class="table table-striped table-hover">
        <thead>
          <th>Sale Code</th>
          <th>Select Client</th>
          <th>Select Date </th>
        </thead>
        <tbody formArrayName="venteLines">
          <tr *ngFor="let line of venteLinesControls; let i = index" class="vente-line">
              <td>  
            <select id="articleId"  [formControl]="venteLinesControls[i].get('articleId')"   class="form-control" required>
              <option value="0" selected>Select an article</option>
              <option *ngFor="let article of articles" [value]="article.id">{{ article.libelle }}</option>
            </select>         
          <td>
            <input type="number" id="qtySold" [formControl]="venteLinesControls[i].get('qtySold')" class="form-control" required />
          </td>
          <td>
            <button type="button" class="btn btn-danger" (click)="removeVenteLine(i)">Remove</button>
          </td>
          </tr>
        
        </tbody>
      </table>
      
      <div class="row mb-4 mt-4" >
        <div class="col-6">
          <button type="submit" class="btn btn-outline-primary mt-3 text-start">Valid</button>
        </div>
        <div class="col-6 text-end">
          <button type="button" class="btn btn-outline-secondary mt-3 " routerLink="/ventes">Cancel</button>
        </div>
      </div>
    </form>
    
  </div>
  